{"version":3,"sources":["../src/query_ctrl.js"],"names":["GenericDatasourceQueryCtrl","$scope","$injector","scope","target","type","queryType","formatType","queryTypes","formatTypes","panelCtrl","refresh","lastGenerateSQL","datasource","generateSql","sql","showGenerateSQL","errs","expression","length","QueryCtrl","templateUrl"],"mappings":";;;;;;;;;AAAA;;AACA;;;;;;;;IAEaA,0B,WAAAA,0B;;;AACX,sCAAYC,MAAZ,EAAoBC,SAApB,EAA+B;AAAA;;AAAA,wJACvBD,MADuB,EACfC,SADe;;AAG7B,UAAKC,KAAL,GAAaF,MAAb;AACA,UAAKG,MAAL,CAAYA,MAAZ,GAAqB,MAAKA,MAAL,CAAYA,MAAZ,IAAsB,eAA3C;AACA,UAAKA,MAAL,CAAYC,IAAZ,GAAmB,MAAKD,MAAL,CAAYC,IAAZ,IAAoB,WAAvC;AACA,UAAKD,MAAL,CAAYE,SAAZ,GAAwB,MAAKF,MAAL,CAAYE,SAAZ,IAAyB,KAAjD;AACA,UAAKF,MAAL,CAAYG,UAAZ,GAAyB,MAAKH,MAAL,CAAYG,UAAZ,IAA0B,aAAnD;;AAEA,UAAKC,UAAL,GAAkB,CAAC,KAAD,EAAQ,YAAR,CAAlB;AACA,UAAKC,WAAL,GAAmB,CAAC,aAAD,EAAgB,OAAhB,CAAnB;AAV6B;AAW9B;;;;uCAEkB;AACjB,WAAKC,SAAL,CAAeC,OAAf,GADiB,CACS;AAC3B;;;iCAEY;AACX,WAAKD,SAAL,CAAeC,OAAf;AACD;;;kCAEa;AACZ,WAAKC,eAAL,GAAuB,KAAKC,UAAL,CAAgBC,WAAhB,CAA4B,KAAKV,MAAL,CAAYW,GAAxC,CAAvB;AACA,WAAKC,eAAL,GAAuB,CAAC,KAAKA,eAA7B;AACD;;;4CAEuBZ,M,EAAQa,I,EAAM;AACpC,UAAI,CAACb,OAAOc,UAAR,IAAsBd,OAAOc,UAAP,CAAkBC,MAAlB,IAA4B,CAAtD,EAAyD;AACvDF,aAAKC,UAAL,GAAkB,sCAAlB;AACA,eAAO,KAAP;AACD;AACD,aAAO,IAAP;AACD;;;;EAjC6CE,c;;AAqChDpB,2BAA2BqB,WAA3B,GAAyC,4BAAzC","file":"query_ctrl.js","sourcesContent":["import { QueryCtrl } from 'app/plugins/sdk';\r\nimport './css/query-editor.css!'\r\n\r\nexport class GenericDatasourceQueryCtrl extends QueryCtrl {\r\n  constructor($scope, $injector) {\r\n    super($scope, $injector);\r\n\r\n    this.scope = $scope;\r\n    this.target.target = this.target.target || 'select metric';\r\n    this.target.type = this.target.type || 'timeserie';\r\n    this.target.queryType = this.target.queryType || 'SQL';\r\n    this.target.formatType = this.target.formatType || 'Time series';\r\n\r\n    this.queryTypes = [\"SQL\", \"Arithmetic\"];\r\n    this.formatTypes = [\"Time series\", \"Table\"];\r\n  }\r\n\r\n  onChangeInternal() {\r\n    this.panelCtrl.refresh(); // Asks the panel to refresh data.\r\n  }\r\n\r\n  targetBlur() {\r\n    this.panelCtrl.refresh();\r\n  }\r\n\r\n  generateSQL() {\r\n    this.lastGenerateSQL = this.datasource.generateSql(this.target.sql);\r\n    this.showGenerateSQL = !this.showGenerateSQL;\r\n  }\r\n\r\n  validateArithmeticQuery(target, errs) {\r\n    if (!target.expression || target.expression.length == 0) {\r\n      errs.expression = \"Must specify a javascript expression\";\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n\r\nGenericDatasourceQueryCtrl.templateUrl = 'partials/query.editor.html';"]}